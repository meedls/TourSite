## TravelHub — туристический портал

Современный сервис на Django для поиска, конструирования и управления маршрутами: рейсы, отели, города, достопримечательности и друзья в одной системе.

---

## Как запустить проект (пошагово)

**Требования:** Python 3.12+, PostgreSQL (по умолчанию) или SQLite, pip.

1) Клонирование и окружение
```bash
git clone <URL-репозитория>
cd Tour
python -m venv .venv
source .venv/bin/activate   # Windows: .venv\Scripts\activate
```

2) Установка зависимостей  
Если есть `requirements.txt` — `pip install -r requirements.txt`.  
Если файла нет: `pip install django psycopg2-binary pillow`.

3) Настройка базы
- По умолчанию в `tour_project/settings.py` PostgreSQL:
```python
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql',
        'NAME': 'tour_db',
        'USER': 'postgres',
        'PASSWORD': '12345',
        'HOST': 'localhost',
        'PORT': '5432',
    }
}
```
Поменяйте креды под себя и вынесите в окружение.  
Для SQLite замените блок на:
```python
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3',
        'NAME': BASE_DIR / 'db.sqlite3',
    }
}
```

4) Миграции и суперпользователь
```bash
python manage.py migrate
python manage.py createsuperuser
```
Есть тестовый админ (dev): логин `admin`, пароль `admin` — в продакшене поменять.

5) Заполнение тестовыми данными (опционально)
```bash
# Создание тестовых отелей
python manage.py create_sample_hotels

# Создание тестовых рейсов и авиакомпаний
python manage.py create_sample_flights
```

6) Запуск
```bash
python manage.py runserver
```
Откройте http://127.0.0.1:8000/

---

## Что за проект

**Коротко:** конструктор туров + витрины рейсов/отелей/городов/мест, таймлайн-превью из выбранных элементов, базовая социальщина (друзья), админка.

### Архитектура
- `tour_project/` — настройки, маршрутизация.
- `users/` — кастомный User, Profile, Friendship, аутентификация.
- `places/` — города (`City`), достопримечательности (`Place`).
- `flights/` — авиакомпании и рейсы (`Airline`, `Flight`), поиск/детали.
- `hotels/` — отели, фото, услуги, отзывы (лайки/дизлайки).
- `tours/` — туры, связки рейсов/отелей/мест/городов/участников, конструктор.
- `templates/` — страницы туров/рейсов/отелей/юзеров + базовый шаблон.
- `static/` — CSS/JS/images, 3D ассеты; `media/` — загружаемые файлы.
- `front/` — макеты/исходники верстки.

### Данные и модели (основное)
- Пользователи: `User`, `Profile`, `Friendship`.
- Гео: `City`, `Place`.
- Рейсы: `Airline`, `Flight` (время, цена, класс, длительность).
- Отели: `Hotel`, `HotelImage`, `HotelService`, `Review` (лайки/дизлайки).
- Туры: `Tour`, `TourCity`, `TourFlight`, `TourHotel`, `TourPlace`, `TourParticipant`, `Favorite`, `Booking`.

### Конструктор тура (что умеет сейчас)
- Фильтры рейсов: откуда/куда, roundtrip, даты, класс, пассажиры, кнопка поиска, "Ещё" для скрытых карточек.
- Попапы выбора городов (откуда/куда) и билетов/класса, выбор дат из доступных рейсов.
- Выбор сущностей: рейсы, отели, города, места, друзья. Подсветка выбранных карточек (синяя для рейсов/отелей, белая для городов/мест), счетчик выбора.
- Превью таймлайна на странице: лента с бейджами (Рейс/Отель/Город/Место/Друг) и центральной линией. "Создать тур" рендерит превью; серверный эндпоинт `tours/build/` создаёт тур из выбранного (требуется авторизация).
- Переключение выделения: повторное нажатие на выбранный элемент убирает выделение.

### Основные URL
- `/` — главная страница с готовыми турами и кнопками "Собери свой тур" / "Готовые туры".
- `/tours/create/` — конструктор туров с выбором рейсов, отелей, городов, мест и друзей.
- `/tours/list/` — список публичных туров; `/tours/<id>/` — деталь тура.
- `/hotels/`, `/hotels/<id>/` — список отелей и детальная страница отеля.
- `/flights/`, `/flights/<id>/` — список рейсов, поиск и детальная страница рейса с модальным окном выбора багажа.
- `/users/login`, `/users/register`, `/users/profile` — аутентификация и профиль.
- `/admin/` — админка Django.

### Технологии
- Django 6.0 (Python 3.12+)
- PostgreSQL (или SQLite для локалки)
- HTML/CSS/JS, Font Awesome
- Pillow (картинки), WebGL/Three.js (3D ассеты)

### Новые функции и улучшения

#### UI/UX улучшения
- **Модальное окно выбора багажа**: на странице деталей рейса (`/flights/<id>/`) добавлено модальное окно с информацией о ручной клади и багаже, открывается по кнопке "Выбрать" рядом с условиями тарифа.
- **Улучшенное модальное окно редактирования профиля**: современный дизайн с анимациями, улучшенными полями ввода и градиентной кнопкой сохранения.
- **Центрированная навигация**: навигационное меню всегда по центру, независимо от наличия кнопки "Вход".
- **Улучшенная кнопка закрытия**: кнопки закрытия модальных окон имеют круглый фон для лучшей видимости.
- **Белое выделение для городов и мест**: в блоках "Города по пути" и "Интересные места" выбранные элементы выделяются белым цветом для лучшей видимости на синем фоне.

#### Функциональность
- **Переключение выделения**: повторное нажатие на выбранный элемент (рейс, отель, город, место) убирает выделение.
- **Центрированный заголовок**: надпись "Ваш собранный тур" отображается по центру после создания тура.
- **Убрано подчеркивание кнопок**: кнопки "Собери свой тур" и "Готовые туры" на главной странице без подчеркивания.

#### Данные
- **Команда создания тестовых рейсов**: `python manage.py create_sample_flights` — создает авиакомпании и рейсы для тестирования.
- **Команда создания тестовых отелей**: `python manage.py create_sample_hotels` — создает отели с изображениями и услугами.



### Контакты
- Email: journey@gmail.ru
- Телефон: 8 800 000 35 55

© 2025 TravelHub

